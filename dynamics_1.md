# 動力学

マニピュレータに可能な運動と不可能な運動

## ニュートンの運動方程式

巨視的には，すべてのものは運動方程式に従って運動します．
ロボットの運動を考える上では，微視的な量子効果は無視できるほど小さいと考えて良いでしょう．

$x$軸に沿って動く重さ$m$の質点に対し，力$F$がかかっているとき，
$$
\ddot{x} = \frac{F}{m}
$$
が成立します．これを**ニュートンの運動方程式**と呼びます．$\dot{*}$は時間による微分を表しています．
これは，質点に力を与えると，それに比例して**加速度**が生まれることを表しています．質量は**ものの動かしにくさ**の指標で，重いほど加速度が生まれにくいことを示しています．

## オイラーの運動方程式

ロボティクスで扱う運動は**剛体**に対して考えることが多いでしょう．
そこで，平面上に置かれたリンクに対して，回転軸が取り付けられていて，そこにモーメント（偶力）$\tau$がかかっているときの運動を考えましょう．リンクの姿勢を$\theta$とすると，
$$
\ddot{\theta} = \frac{\tau}{I}
$$
ここで，$I$は回転軸周りの慣性モーメントを表しています．
これは，剛体の回転軸周りにモーメントを与えると，それに比例して**角加速度**が生まれることを表しています．慣性モーメントは**ものの回しにくさ**の指標で，大きいほど角加速度が生まれにくいことを示しています．

## 運動方程式の一般形

ニュートンの運動方程式と，オイラーの運動方程式はよく似た形をしています．もっと一般的に考えることにしましょう．
位置や姿勢を**一般化座標**$q$と置きます．$q$はスカラーでもベクトルでも構いません．このとき運動方程式は
$$
\ddot{q} =M(q)^{-1} Q
$$
と書けます．$M(q)$は慣性行列，$Q$は一般化力と呼ばれます．

### もっと一般的に

外力をまとめて書くのもいいのですが，外力の中にはポテンシャルから受ける力や遠心力，コリオリの力などが含まれます．
これらの力は外部から手やモーターで加える力と分けておきたいですね．
このような要求が存在するときの運動方程式は
$$
M(q)\ddot{q} + h(q,\dot{q}) + g(q) = Q
$$
となります．$g(q)$がポテンシャルから受ける力（重力やバネ力です），$h(q,\dot{q})$が遠心力・コリオリの力を表します．

### ラグランジュの運動方程式

さらに一般化していきましょう．一般化座標$q$に対してラグランジュの運動方程式は
$$
\frac{\rm d}{{\rm d}t}\left(\frac{\partial L}{\partial \dot{q}}\right) - \frac{\partial L}{\partial q}  = Q
$$
と書けます．$L$は**ラグランジアン**と呼ばれる量で，
$$
L=T-U
$$
となります．$T$は系の運動エネルギー，$U$は系のポテンシャルエネルギーです．

### もっと具体的に

一般的な運動方程式の表式は得られましたが，具体的にどのような形をしているのでしょうか．少し具体的な問題を考えてみましょう．

$x$軸上を動く質点$m$に線形バネ$k$，線形ダンパ$c$が取り付けられ，外力$F$が加えられている状況を考えましょう．このとき運動方程式は
$$
m\ddot{x} + c\dot{x} + kx = F
$$
となります．

次に，$x$軸上を動く2質点$m_1, m_2$がバネ$k$で接続されている系を考えましょう．
このとき運動方程式は
$$
m_1 \ddot{x}_1 = -k(x_1 - x_2)\\
m_2 \ddot{x}_2 = -k(x_2 - x_1)
$$
となります．
ここで
$$
M=\begin{bmatrix}
    m_1 & 0\\
    0 & m_2
\end{bmatrix}, q=\begin{bmatrix}
    x_1\\ x_2
\end{bmatrix}
$$
とおくと，運動方程式は
$$
M\ddot{q} = \begin{bmatrix}
    -k & k\\
    k & -k
\end{bmatrix}q
$$
と書くこともできます．