# 2リンクアームの動力学(1)

ラグランジュの運動方程式を用いて，2次元平面に拘束された2リンクアームの運動方程式を求めてみる．

## 定義

<div align="center">
    <img src="fig/TwoLinkArm.png" alt="COP" width = "400">
</div>

一様とは限らない2つの剛体リンクが，ジョイントで接続されている．
リンク1はジョイントと反対側の端もジョイントとなっていて，慣性座標系の原点に固定されている．

リンク1の質量と長さは$m_1$, $l_1$とする．原点から質量中心までの距離を$l_{g1}$とする．質量中心まわりの慣性モーメントを$I_1$とする．
リンク2の質量と長さは$m_2$, $l_2$とする．ジョイントから質量中心までの距離を$l_{g2}$とする．質量中心まわりの慣性モーメントを$I_2$とする．

リンク1とリンク2が$x$軸となす角度をそれぞれ$\theta_1$，$\theta_2$とする．
リンク1とリンク2の質量中心の位置をそれぞれ$(x_1, y_1)$，$(x_2, y_2)$とする．
それぞれのジョイントにはモーターが接続されていて，トルク$\tau_1$と$\tau_2$を発揮することができる．
$y$の負の向きに重力$g$がかかる．

## エネルギー関数の計算

系の運動エネルギーとポテンシャルエネルギーを求める．

まず運動エネルギーを求めよう．
ここではまず，座標系としてデカルト座標を用いて書き下すのが簡便である．
それぞれのリンクについて運動エネルギーを求めると，
$$
    T_1 = \frac{m_1}{2}(\dot{x}_1^2 + \dot{y}_1^2) + \frac{I_1}{2}\dot{\theta}_1^2\\
    T_2 = \frac{m_2}{2}(\dot{x}_2^2 + \dot{y}_2^2) + \frac{I_2}{2}\dot{\theta}_2^2
$$
ここではまだジョイントによる拘束は考えていない．**それぞれのリンクは独立なものとして運動エネルギーを求め，あとから拘束条件を考える**ことで思考を単純化することができる．

ジョイントによる拘束条件は以下のように書ける．
ジョイントは幾何的な拘束であり，位置の関係式で完全に表すことができるので，ホロノミックな拘束であるといえる．ホロノミック拘束は計算が簡単になるので，ありがたい条件である．
$$
    x_1 = l_{g1}\cos\theta_1\\
    y_1 = l_{g2}\sin\theta_1
$$
$$
    x_2 = l_1\cos\theta_1 + l_{g2}\cos\theta_2\\
    y_2 = l_1\sin\theta_1 + l_{g2}\sin\theta_2
$$
位置拘束条件の時間微分を行い，$\dot{x}_i$と$\dot{y}_i$を$\theta_i$と$\dot{\theta}_i$で表す．すなわち，
$$
    \dot{x}_1 = -l_{g1}\dot{\theta}_1\sin\theta_1\\
    \dot{y}_1 = l_{g2}\dot{\theta}_1\cos\theta_1
$$
$$
    \dot{x}_2 = -l_1\dot{\theta}_1\sin\theta_1 - l_{g2}\dot{\theta}_2\sin\theta_2\\
    \dot{y}_2 = l_1\dot{\theta}_1\cos\theta_1 + l_{g2}\dot{\theta}_2\cos\theta_2
$$
である．